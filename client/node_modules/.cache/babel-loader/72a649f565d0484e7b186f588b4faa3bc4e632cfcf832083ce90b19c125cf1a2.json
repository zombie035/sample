{"ast":null,"code":"// client/src/pages/DriverPage.jsx\nimport React,{useState,useEffect,useCallback}from'react';import{useAuth}from'../contexts/AuthContext';import{useSocket}from'../contexts/SocketContext';import Navbar from'../components/Layout/Navbar';import MapComponent from'../components/Common/MapComponent';import useGeolocation from'../hooks/useGeolocation';import{busService}from'../services/busService';import{userService}from'../services/userService';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const DriverDashboard=()=>{const{user}=useAuth();const{socket,connected,sendLocationUpdate}=useSocket();const{location,error:locationError,startTracking,stopTracking,isTracking}=useGeolocation();const[bus,setBus]=useState(null);const[loading,setLoading]=useState(true);const[isLive,setIsLive]=useState(false);const[speed,setSpeed]=useState(0);const[accuracy,setAccuracy]=useState(0);const[studentCount,setStudentCount]=useState(0);const[toast,setToast]=useState(null);// Fetch driver data and bus info\nuseEffect(()=>{const fetchData=async()=>{try{setLoading(true);const[driverData,busData]=await Promise.all([userService.getStudentProfile(),busService.getMyBus()]);if(driverData.success){var _busData$students;setBus(busData);setStudentCount((busData===null||busData===void 0?void 0:(_busData$students=busData.students)===null||_busData$students===void 0?void 0:_busData$students.length)||0);}}catch(error){console.error('Error fetching driver data:',error);showToast('Failed to load dashboard data','error');}finally{setLoading(false);}};fetchData();},[]);// Socket listeners\nuseEffect(()=>{if(!socket)return;const handleTrackingCount=data=>{if(data.busId===(bus===null||bus===void 0?void 0:bus._id)){setStudentCount(data.count);}};socket.on('tracking-count',handleTrackingCount);return()=>{socket.off('tracking-count',handleTrackingCount);};},[socket,bus]);// Handle location updates\nconst handleLocationUpdate=useCallback(async locationData=>{if(!(bus!==null&&bus!==void 0&&bus._id))return;const speedKmh=locationData.speed?(locationData.speed*3.6).toFixed(1):0;setSpeed(speedKmh);setAccuracy(Math.round(locationData.accuracy));// Send to server\ntry{const result=await busService.updateLocation({latitude:locationData.latitude,longitude:locationData.longitude,speed:speedKmh,accuracy:locationData.accuracy,status:'moving'});if(result.success){// Also send via socket for real-time updates\nsendLocationUpdate({busId:bus._id,latitude:locationData.latitude,longitude:locationData.longitude,speed:speedKmh,status:'moving',timestamp:new Date()});}}catch(error){console.error('Failed to update location:',error);}},[bus,sendLocationUpdate]);// Start live tracking\nconst startLiveTracking=async()=>{if(!bus){showToast('No bus assigned to you','error');return;}if(locationError){showToast('Please enable location services','error');return;}try{const watchId=startTracking(handleLocationUpdate);if(watchId){setIsLive(true);showToast('Live tracking started','success');}}catch(error){showToast('Failed to start tracking','error');}};// Stop live tracking\nconst stopLiveTracking=()=>{stopTracking();setIsLive(false);// Update bus status to stopped\nif(bus!==null&&bus!==void 0&&bus._id){busService.updateLocation({updateStatusOnly:true,status:'stopped'});}showToast('Live tracking stopped','info');};// Show toast notification\nconst showToast=function(message){let type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'info';setToast({message,type});setTimeout(()=>setToast(null),3000);};// Map markers\nconst mapMarkers=location?[{position:{lat:location.latitude,lng:location.longitude},iconHtml:\"\\n        <div style=\\\"\\n          width: 50px;\\n          height: 50px;\\n          background: #2563eb;\\n          border-radius: 50%;\\n          border: 3px solid white;\\n          box-shadow: 0 4px 15px rgba(37, 99, 235, 0.4);\\n          display: flex;\\n          align-items: center;\\n          justify-content: center;\\n          color: white;\\n          font-size: 1.2rem;\\n        \\\">\\n          <i class=\\\"fas fa-bus\\\"></i>\\n        </div>\\n      \",iconSize:[50,50],iconAnchor:[25,50],popup:\"\\n        <div style=\\\"padding: 10px; min-width: 200px;\\\">\\n          <strong>Your Location</strong><br>\\n          Bus: \".concat((bus===null||bus===void 0?void 0:bus.busNumber)||'N/A',\"<br>\\n          Speed: \").concat(speed,\" km/h<br>\\n          Accuracy: \").concat(accuracy,\"m\\n        </div>\\n      \")}]:[];if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-gray-600\",children:\"Loading dashboard...\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50\",children:[/*#__PURE__*/_jsx(Navbar,{}),toast&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed top-4 right-4 z-50 px-6 py-4 rounded-lg shadow-lg \".concat(toast.type==='success'?'bg-green-500':toast.type==='error'?'bg-red-500':'bg-blue-500',\" text-white transform transition-transform duration-300\"),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas \".concat(toast.type==='success'?'fa-check-circle':toast.type==='error'?'fa-exclamation-circle':'fa-info-circle')}),/*#__PURE__*/_jsx(\"span\",{children:toast.message})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row md:items-center md:justify-between gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900\",children:\"Driver Dashboard\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 mt-2\",children:[\"Welcome back, \",/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:user===null||user===void 0?void 0:user.name})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-2 rounded-full flex items-center gap-2 \".concat(connected?'bg-green-100 text-green-800':'bg-red-100 text-red-800'),children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 rounded-full \".concat(connected?'bg-green-500':'bg-red-500')}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium\",children:connected?'Connected':'Disconnected'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-2 rounded-full flex items-center gap-2 \".concat(isLive?'bg-purple-100 text-purple-800':'bg-gray-100 text-gray-800'),children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 rounded-full animate-pulse \".concat(isLive?'bg-purple-500':'bg-gray-500')}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium\",children:isLive?'LIVE':'OFFLINE'})]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-3 gap-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"lg:col-span-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-lg overflow-hidden border border-gray-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-4 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-gray-900\",children:\"Live Location Tracking\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center gap-2\",children:location&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-600\",children:[location.latitude.toFixed(6),\", \",location.longitude.toFixed(6)]})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"h-[500px] relative\",children:[/*#__PURE__*/_jsx(MapComponent,{center:location?[location.latitude,location.longitude]:[20.5937,78.9629],zoom:location?15:13,markers:mapMarkers,interactive:true}),locationError&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-4 left-4 right-4 bg-red-50 border border-red-200 rounded-lg p-4 z-10\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-exclamation-triangle text-red-500\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-red-700 font-medium\",children:\"Location Error\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600 text-sm\",children:locationError})]})]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:isLive?stopLiveTracking:startLiveTracking,disabled:!bus||locationError,className:\"px-6 py-4 rounded-xl font-semibold text-lg transition-all flex items-center justify-center gap-3 \".concat(isLive?'bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white':'bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white',\" disabled:opacity-50 disabled:cursor-not-allowed\"),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas \".concat(isLive?'fa-stop-circle':'fa-play-circle')}),isLive?'Stop Live Tracking':'Start Live Tracking']}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>location&&window.open(\"https://www.google.com/maps?q=\".concat(location.latitude,\",\").concat(location.longitude),'_blank'),disabled:!location,className:\"px-6 py-4 rounded-xl font-semibold text-lg bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white transition-all flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-external-link-alt\"}),\"Open in Google Maps\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4 mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 rounded-xl bg-gradient-to-r from-blue-500 to-indigo-600 flex items-center justify-center text-white text-2xl\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-bus\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-bold text-gray-900\",children:[\"Bus \",(bus===null||bus===void 0?void 0:bus.busNumber)||'N/A']}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:(bus===null||bus===void 0?void 0:bus.routeName)||'No route assigned'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded-lg\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mb-1\",children:\"Vehicle ID\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold\",children:(bus===null||bus===void 0?void 0:bus.busId)||'---'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded-lg\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mb-1\",children:\"Capacity\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"font-semibold\",children:[(bus===null||bus===void 0?void 0:bus.capacity)||40,\" seats\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded-lg\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mb-1\",children:\"Driver\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold\",children:(bus===null||bus===void 0?void 0:bus.driverName)||(user===null||user===void 0?void 0:user.name)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded-lg\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mb-1\",children:\"Current Status\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-3 h-3 rounded-full \".concat(isLive?'bg-green-500':'bg-red-500')}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:isLive?'ONLINE':'OFFLINE'})]})]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4\",children:\"Live Telemetry\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 mb-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-lg bg-blue-500 flex items-center justify-center text-white\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-tachometer-alt\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-600 uppercase font-semibold\",children:\"Speed\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:[speed,/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600 ml-1\",children:\"km/h\"})]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 mb-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-lg bg-green-500 flex items-center justify-center text-white\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-satellite\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-600 uppercase font-semibold\",children:\"GPS Accuracy\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:[accuracy,/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600 ml-1\",children:\"m\"})]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-br from-purple-50 to-purple-100 p-4 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 mb-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-lg bg-purple-500 flex items-center justify-center text-white\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-user-graduate\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-600 uppercase font-semibold\",children:\"Active Trackers\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:studentCount})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-br from-amber-50 to-amber-100 p-4 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 mb-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-lg bg-amber-500 flex items-center justify-center text-white\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-clock\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-600 uppercase font-semibold\",children:\"Uptime\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:isLive?'Live':'--:--'})]})]})})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4\",children:\"Quick Actions\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>window.location.reload(),className:\"w-full px-4 py-3 bg-gray-50 hover:bg-gray-100 rounded-lg text-left flex items-center gap-3 transition-colors\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-sync-alt text-gray-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Refresh Dashboard\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>showToast('Report feature coming soon!','info'),className:\"w-full px-4 py-3 bg-gray-50 hover:bg-gray-100 rounded-lg text-left flex items-center gap-3 transition-colors\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-flag text-red-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Report Issue\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigator.clipboard.writeText(\"Bus \".concat(bus===null||bus===void 0?void 0:bus.busNumber,\" - \").concat(bus===null||bus===void 0?void 0:bus.routeName)),className:\"w-full px-4 py-3 bg-gray-50 hover:bg-gray-100 rounded-lg text-left flex items-center gap-3 transition-colors\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-copy text-blue-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Copy Bus Info\"})]})]})]})})]})]})]})]});};export default DriverDashboard;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useAuth","useSocket","Navbar","MapComponent","useGeolocation","busService","userService","jsx","_jsx","jsxs","_jsxs","DriverDashboard","user","socket","connected","sendLocationUpdate","location","error","locationError","startTracking","stopTracking","isTracking","bus","setBus","loading","setLoading","isLive","setIsLive","speed","setSpeed","accuracy","setAccuracy","studentCount","setStudentCount","toast","setToast","fetchData","driverData","busData","Promise","all","getStudentProfile","getMyBus","success","_busData$students","students","length","console","showToast","handleTrackingCount","data","busId","_id","count","on","off","handleLocationUpdate","locationData","speedKmh","toFixed","Math","round","result","updateLocation","latitude","longitude","status","timestamp","Date","startLiveTracking","watchId","stopLiveTracking","updateStatusOnly","message","type","arguments","undefined","setTimeout","mapMarkers","position","lat","lng","iconHtml","iconSize","iconAnchor","popup","concat","busNumber","className","children","name","center","zoom","markers","interactive","onClick","disabled","window","open","routeName","capacity","driverName","reload","navigator","clipboard","writeText"],"sources":["/home/project/client/src/pages/DriverPage.jsx"],"sourcesContent":["// client/src/pages/DriverPage.jsx\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useSocket } from '../contexts/SocketContext';\nimport Navbar from '../components/Layout/Navbar';\nimport MapComponent from '../components/Common/MapComponent';\nimport useGeolocation from '../hooks/useGeolocation';\nimport { busService } from '../services/busService';\nimport { userService } from '../services/userService';\n\nconst DriverDashboard = () => {\n  const { user } = useAuth();\n  const { socket, connected, sendLocationUpdate } = useSocket();\n  const { location, error: locationError, startTracking, stopTracking, isTracking } = useGeolocation();\n  \n  const [bus, setBus] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [isLive, setIsLive] = useState(false);\n  const [speed, setSpeed] = useState(0);\n  const [accuracy, setAccuracy] = useState(0);\n  const [studentCount, setStudentCount] = useState(0);\n  const [toast, setToast] = useState(null);\n\n  // Fetch driver data and bus info\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        setLoading(true);\n        const [driverData, busData] = await Promise.all([\n          userService.getStudentProfile(),\n          busService.getMyBus()\n        ]);\n        \n        if (driverData.success) {\n          setBus(busData);\n          setStudentCount(busData?.students?.length || 0);\n        }\n      } catch (error) {\n        console.error('Error fetching driver data:', error);\n        showToast('Failed to load dashboard data', 'error');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n  }, []);\n\n  // Socket listeners\n  useEffect(() => {\n    if (!socket) return;\n\n    const handleTrackingCount = (data) => {\n      if (data.busId === bus?._id) {\n        setStudentCount(data.count);\n      }\n    };\n\n    socket.on('tracking-count', handleTrackingCount);\n\n    return () => {\n      socket.off('tracking-count', handleTrackingCount);\n    };\n  }, [socket, bus]);\n\n  // Handle location updates\n  const handleLocationUpdate = useCallback(async (locationData) => {\n    if (!bus?._id) return;\n\n    const speedKmh = locationData.speed ? (locationData.speed * 3.6).toFixed(1) : 0;\n    setSpeed(speedKmh);\n    setAccuracy(Math.round(locationData.accuracy));\n\n    // Send to server\n    try {\n      const result = await busService.updateLocation({\n        latitude: locationData.latitude,\n        longitude: locationData.longitude,\n        speed: speedKmh,\n        accuracy: locationData.accuracy,\n        status: 'moving'\n      });\n\n      if (result.success) {\n        // Also send via socket for real-time updates\n        sendLocationUpdate({\n          busId: bus._id,\n          latitude: locationData.latitude,\n          longitude: locationData.longitude,\n          speed: speedKmh,\n          status: 'moving',\n          timestamp: new Date()\n        });\n      }\n    } catch (error) {\n      console.error('Failed to update location:', error);\n    }\n  }, [bus, sendLocationUpdate]);\n\n  // Start live tracking\n  const startLiveTracking = async () => {\n    if (!bus) {\n      showToast('No bus assigned to you', 'error');\n      return;\n    }\n\n    if (locationError) {\n      showToast('Please enable location services', 'error');\n      return;\n    }\n\n    try {\n      const watchId = startTracking(handleLocationUpdate);\n      if (watchId) {\n        setIsLive(true);\n        showToast('Live tracking started', 'success');\n      }\n    } catch (error) {\n      showToast('Failed to start tracking', 'error');\n    }\n  };\n\n  // Stop live tracking\n  const stopLiveTracking = () => {\n    stopTracking();\n    setIsLive(false);\n    \n    // Update bus status to stopped\n    if (bus?._id) {\n      busService.updateLocation({\n        updateStatusOnly: true,\n        status: 'stopped'\n      });\n    }\n    \n    showToast('Live tracking stopped', 'info');\n  };\n\n  // Show toast notification\n  const showToast = (message, type = 'info') => {\n    setToast({ message, type });\n    setTimeout(() => setToast(null), 3000);\n  };\n\n  // Map markers\n  const mapMarkers = location ? [\n    {\n      position: { lat: location.latitude, lng: location.longitude },\n      iconHtml: `\n        <div style=\"\n          width: 50px;\n          height: 50px;\n          background: #2563eb;\n          border-radius: 50%;\n          border: 3px solid white;\n          box-shadow: 0 4px 15px rgba(37, 99, 235, 0.4);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: white;\n          font-size: 1.2rem;\n        \">\n          <i class=\"fas fa-bus\"></i>\n        </div>\n      `,\n      iconSize: [50, 50],\n      iconAnchor: [25, 50],\n      popup: `\n        <div style=\"padding: 10px; min-width: 200px;\">\n          <strong>Your Location</strong><br>\n          Bus: ${bus?.busNumber || 'N/A'}<br>\n          Speed: ${speed} km/h<br>\n          Accuracy: ${accuracy}m\n        </div>\n      `\n    }\n  ] : [];\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Loading dashboard...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <Navbar />\n      \n      {/* Toast Notification */}\n      {toast && (\n        <div className={`fixed top-4 right-4 z-50 px-6 py-4 rounded-lg shadow-lg ${\n          toast.type === 'success' ? 'bg-green-500' :\n          toast.type === 'error' ? 'bg-red-500' :\n          'bg-blue-500'\n        } text-white transform transition-transform duration-300`}>\n          <div className=\"flex items-center gap-3\">\n            <i className={`fas ${\n              toast.type === 'success' ? 'fa-check-circle' :\n              toast.type === 'error' ? 'fa-exclamation-circle' :\n              'fa-info-circle'\n            }`}></i>\n            <span>{toast.message}</span>\n          </div>\n        </div>\n      )}\n\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {/* Header */}\n        <div className=\"mb-8\">\n          <div className=\"flex flex-col md:flex-row md:items-center md:justify-between gap-4\">\n            <div>\n              <h1 className=\"text-3xl font-bold text-gray-900\">Driver Dashboard</h1>\n              <p className=\"text-gray-600 mt-2\">\n                Welcome back, <span className=\"font-semibold\">{user?.name}</span>\n              </p>\n            </div>\n            \n            <div className=\"flex items-center gap-4\">\n              <div className={`px-4 py-2 rounded-full flex items-center gap-2 ${\n                connected ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'\n              }`}>\n                <div className={`w-2 h-2 rounded-full ${connected ? 'bg-green-500' : 'bg-red-500'}`}></div>\n                <span className=\"text-sm font-medium\">\n                  {connected ? 'Connected' : 'Disconnected'}\n                </span>\n              </div>\n              \n              <div className={`px-4 py-2 rounded-full flex items-center gap-2 ${\n                isLive ? 'bg-purple-100 text-purple-800' : 'bg-gray-100 text-gray-800'\n              }`}>\n                <div className={`w-2 h-2 rounded-full animate-pulse ${isLive ? 'bg-purple-500' : 'bg-gray-500'}`}></div>\n                <span className=\"text-sm font-medium\">\n                  {isLive ? 'LIVE' : 'OFFLINE'}\n                </span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Main Content */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n          {/* Left Column - Map */}\n          <div className=\"lg:col-span-2\">\n            <div className=\"bg-white rounded-xl shadow-lg overflow-hidden border border-gray-200\">\n              <div className=\"p-4 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50\">\n                <div className=\"flex items-center justify-between\">\n                  <h2 className=\"text-lg font-semibold text-gray-900\">\n                    Live Location Tracking\n                  </h2>\n                  <div className=\"flex items-center gap-2\">\n                    {location && (\n                      <span className=\"text-sm text-gray-600\">\n                        {location.latitude.toFixed(6)}, {location.longitude.toFixed(6)}\n                      </span>\n                    )}\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"h-[500px] relative\">\n                <MapComponent\n                  center={location ? [location.latitude, location.longitude] : [20.5937, 78.9629]}\n                  zoom={location ? 15 : 13}\n                  markers={mapMarkers}\n                  interactive={true}\n                />\n                \n                {locationError && (\n                  <div className=\"absolute top-4 left-4 right-4 bg-red-50 border border-red-200 rounded-lg p-4 z-10\">\n                    <div className=\"flex items-center gap-3\">\n                      <i className=\"fas fa-exclamation-triangle text-red-500\"></i>\n                      <div>\n                        <p className=\"text-red-700 font-medium\">Location Error</p>\n                        <p className=\"text-red-600 text-sm\">{locationError}</p>\n                      </div>\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n\n            {/* Control Buttons */}\n            <div className=\"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <button\n                onClick={isLive ? stopLiveTracking : startLiveTracking}\n                disabled={!bus || locationError}\n                className={`px-6 py-4 rounded-xl font-semibold text-lg transition-all flex items-center justify-center gap-3 ${\n                  isLive \n                    ? 'bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white' \n                    : 'bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white'\n                } disabled:opacity-50 disabled:cursor-not-allowed`}\n              >\n                <i className={`fas ${isLive ? 'fa-stop-circle' : 'fa-play-circle'}`}></i>\n                {isLive ? 'Stop Live Tracking' : 'Start Live Tracking'}\n              </button>\n              \n              <button\n                onClick={() => location && window.open(`https://www.google.com/maps?q=${location.latitude},${location.longitude}`, '_blank')}\n                disabled={!location}\n                className=\"px-6 py-4 rounded-xl font-semibold text-lg bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white transition-all flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                <i className=\"fas fa-external-link-alt\"></i>\n                Open in Google Maps\n              </button>\n            </div>\n          </div>\n\n          {/* Right Column - Info & Stats */}\n          <div className=\"space-y-6\">\n            {/* Bus Info Card */}\n            <div className=\"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden\">\n              <div className=\"p-6\">\n                <div className=\"flex items-center gap-4 mb-6\">\n                  <div className=\"w-16 h-16 rounded-xl bg-gradient-to-r from-blue-500 to-indigo-600 flex items-center justify-center text-white text-2xl\">\n                    <i className=\"fas fa-bus\"></i>\n                  </div>\n                  <div>\n                    <h3 className=\"text-xl font-bold text-gray-900\">\n                      Bus {bus?.busNumber || 'N/A'}\n                    </h3>\n                    <p className=\"text-gray-600\">{bus?.routeName || 'No route assigned'}</p>\n                  </div>\n                </div>\n                \n                <div className=\"space-y-4\">\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div className=\"bg-gray-50 p-4 rounded-lg\">\n                      <p className=\"text-sm text-gray-500 mb-1\">Vehicle ID</p>\n                      <p className=\"font-semibold\">{bus?.busId || '---'}</p>\n                    </div>\n                    <div className=\"bg-gray-50 p-4 rounded-lg\">\n                      <p className=\"text-sm text-gray-500 mb-1\">Capacity</p>\n                      <p className=\"font-semibold\">{bus?.capacity || 40} seats</p>\n                    </div>\n                  </div>\n                  \n                  <div className=\"bg-gray-50 p-4 rounded-lg\">\n                    <p className=\"text-sm text-gray-500 mb-1\">Driver</p>\n                    <p className=\"font-semibold\">{bus?.driverName || user?.name}</p>\n                  </div>\n                  \n                  <div className=\"bg-gray-50 p-4 rounded-lg\">\n                    <p className=\"text-sm text-gray-500 mb-1\">Current Status</p>\n                    <div className=\"flex items-center gap-2\">\n                      <div className={`w-3 h-3 rounded-full ${\n                        isLive ? 'bg-green-500' : 'bg-red-500'\n                      }`}></div>\n                      <span className=\"font-semibold\">{isLive ? 'ONLINE' : 'OFFLINE'}</span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Telemetry Cards */}\n            <div className=\"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden\">\n              <div className=\"p-6\">\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Live Telemetry</h3>\n                \n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div className=\"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-lg\">\n                    <div className=\"flex items-center gap-3 mb-2\">\n                      <div className=\"w-10 h-10 rounded-lg bg-blue-500 flex items-center justify-center text-white\">\n                        <i className=\"fas fa-tachometer-alt\"></i>\n                      </div>\n                      <div>\n                        <p className=\"text-xs text-gray-600 uppercase font-semibold\">Speed</p>\n                        <p className=\"text-2xl font-bold text-gray-900\">\n                          {speed}\n                          <span className=\"text-sm text-gray-600 ml-1\">km/h</span>\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                  \n                  <div className=\"bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-lg\">\n                    <div className=\"flex items-center gap-3 mb-2\">\n                      <div className=\"w-10 h-10 rounded-lg bg-green-500 flex items-center justify-center text-white\">\n                        <i className=\"fas fa-satellite\"></i>\n                      </div>\n                      <div>\n                        <p className=\"text-xs text-gray-600 uppercase font-semibold\">GPS Accuracy</p>\n                        <p className=\"text-2xl font-bold text-gray-900\">\n                          {accuracy}\n                          <span className=\"text-sm text-gray-600 ml-1\">m</span>\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                  \n                  <div className=\"bg-gradient-to-br from-purple-50 to-purple-100 p-4 rounded-lg\">\n                    <div className=\"flex items-center gap-3 mb-2\">\n                      <div className=\"w-10 h-10 rounded-lg bg-purple-500 flex items-center justify-center text-white\">\n                        <i className=\"fas fa-user-graduate\"></i>\n                      </div>\n                      <div>\n                        <p className=\"text-xs text-gray-600 uppercase font-semibold\">Active Trackers</p>\n                        <p className=\"text-2xl font-bold text-gray-900\">{studentCount}</p>\n                      </div>\n                    </div>\n                  </div>\n                  \n                  <div className=\"bg-gradient-to-br from-amber-50 to-amber-100 p-4 rounded-lg\">\n                    <div className=\"flex items-center gap-3 mb-2\">\n                      <div className=\"w-10 h-10 rounded-lg bg-amber-500 flex items-center justify-center text-white\">\n                        <i className=\"fas fa-clock\"></i>\n                      </div>\n                      <div>\n                        <p className=\"text-xs text-gray-600 uppercase font-semibold\">Uptime</p>\n                        <p className=\"text-2xl font-bold text-gray-900\">\n                          {isLive ? 'Live' : '--:--'}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Quick Actions */}\n            <div className=\"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden\">\n              <div className=\"p-6\">\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Quick Actions</h3>\n                <div className=\"space-y-3\">\n                  <button \n                    onClick={() => window.location.reload()}\n                    className=\"w-full px-4 py-3 bg-gray-50 hover:bg-gray-100 rounded-lg text-left flex items-center gap-3 transition-colors\"\n                  >\n                    <i className=\"fas fa-sync-alt text-gray-600\"></i>\n                    <span className=\"font-medium\">Refresh Dashboard</span>\n                  </button>\n                  \n                  <button \n                    onClick={() => showToast('Report feature coming soon!', 'info')}\n                    className=\"w-full px-4 py-3 bg-gray-50 hover:bg-gray-100 rounded-lg text-left flex items-center gap-3 transition-colors\"\n                  >\n                    <i className=\"fas fa-flag text-red-600\"></i>\n                    <span className=\"font-medium\">Report Issue</span>\n                  </button>\n                  \n                  <button \n                    onClick={() => navigator.clipboard.writeText(`Bus ${bus?.busNumber} - ${bus?.routeName}`)}\n                    className=\"w-full px-4 py-3 bg-gray-50 hover:bg-gray-100 rounded-lg text-left flex items-center gap-3 transition-colors\"\n                  >\n                    <i className=\"fas fa-copy text-blue-600\"></i>\n                    <span className=\"font-medium\">Copy Bus Info</span>\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default DriverDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}