{"ast":null,"code":"import _objectSpread from\"/home/project/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// client/src/components/Admin/LiveMonitor.jsx\nimport React,{useState,useEffect,useCallback}from'react';import MapComponent from'../Common/MapComponent';import{busService}from'../../services/busService';import{useSocket}from'../../contexts/SocketContext';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const LiveMonitor=()=>{var _selectedBus$driverId,_selectedBus$driverId3;const[buses,setBuses]=useState([]);const[loading,setLoading]=useState(true);const[selectedBus,setSelectedBus]=useState(null);const[statusFilter,setStatusFilter]=useState('all');const[showBusList,setShowBusList]=useState(true);const[autoRefresh,setAutoRefresh]=useState(true);const{socket}=useSocket();// Fetch initial bus data\nuseEffect(()=>{fetchBuses();},[]);// Setup socket listeners for real-time updates\nuseEffect(()=>{if(!socket)return;const handleBusUpdate=data=>{setBuses(prev=>prev.map(bus=>bus._id===data.busId?_objectSpread(_objectSpread(_objectSpread({},bus),data),{},{updatedAt:new Date()}):bus));};socket.on('bus-update',handleBusUpdate);socket.on('bus-live-update',handleBusUpdate);return()=>{socket.off('bus-update',handleBusUpdate);socket.off('bus-live-update',handleBusUpdate);};},[socket]);// Auto-refresh every 10 seconds\nuseEffect(()=>{if(!autoRefresh)return;const interval=setInterval(()=>{fetchBuses();},10000);return()=>clearInterval(interval);},[autoRefresh]);const fetchBuses=async()=>{try{const busesData=await busService.getLiveBuses();setBuses(busesData||[]);}catch(error){console.error('Error fetching buses:',error);}finally{setLoading(false);}};const handleRefresh=()=>{setLoading(true);fetchBuses();};const handleBusClick=bus=>{setSelectedBus(bus);};const handleUpdateLocation=async(busId,locationData)=>{try{await busService.updateBusLocation(busId,locationData);fetchBuses();}catch(error){console.error('Error updating location:',error);}};const getStatusColor=status=>{switch(status===null||status===void 0?void 0:status.toLowerCase()){case'moving':return'#10b981';case'stopped':return'#f59e0b';case'delayed':return'#ef4444';default:return'#94a3b8';}};const getStatusIcon=status=>{switch(status===null||status===void 0?void 0:status.toLowerCase()){case'moving':return'fa-play';case'stopped':return'fa-pause';case'delayed':return'fa-exclamation-triangle';default:return'fa-question-circle';}};const filteredBuses=buses.filter(bus=>statusFilter==='all'||bus.status===statusFilter);// Prepare map markers\nconst mapMarkers=filteredBuses.filter(bus=>bus.latitude&&bus.longitude).map(bus=>{var _bus$students;return{position:{lat:bus.latitude,lng:bus.longitude},iconHtml:\"\\n        <div style=\\\"\\n          width: 50px;\\n          height: 50px;\\n          background: \".concat(getStatusColor(bus.status),\";\\n          border-radius: 50%;\\n          border: 3px solid white;\\n          box-shadow: 0 4px 15px rgba(0,0,0,0.2);\\n          display: flex;\\n          align-items: center;\\n          justify-content: center;\\n          color: white;\\n          font-size: 1.2rem;\\n          cursor: pointer;\\n        \\\" onclick=\\\"event.stopPropagation();\\\">\\n          <i class=\\\"fas fa-bus\\\"></i>\\n        </div>\\n      \"),iconSize:[50,50],iconAnchor:[25,50],popup:\"\\n        <div style=\\\"padding: 10px; min-width: 200px;\\\">\\n          <strong>Bus \".concat(bus.busNumber,\"</strong><br>\\n          Route: \").concat(bus.routeName||'N/A',\"<br>\\n          Status: \").concat(bus.status||'Offline',\"<br>\\n          Driver: \").concat(bus.driverName||'N/A',\"<br>\\n          Students: \").concat(((_bus$students=bus.students)===null||_bus$students===void 0?void 0:_bus$students.length)||0,\"<br>\\n          <small>Updated: \").concat(new Date(bus.updatedAt).toLocaleTimeString(),\"</small>\\n        </div>\\n      \"),onClick:()=>handleBusClick(bus)};});// Calculate center point for all buses\nconst calculateMapCenter=()=>{if(selectedBus!==null&&selectedBus!==void 0&&selectedBus.latitude&&selectedBus!==null&&selectedBus!==void 0&&selectedBus.longitude){return[selectedBus.latitude,selectedBus.longitude];}const validBuses=filteredBuses.filter(b=>b.latitude&&b.longitude);if(validBuses.length===0)return[20.5937,78.9629];const avgLat=validBuses.reduce((sum,bus)=>sum+bus.latitude,0)/validBuses.length;const avgLng=validBuses.reduce((sum,bus)=>sum+bus.longitude,0)/validBuses.length;return[avgLat,avgLng];};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row md:items-center md:justify-between gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900\",children:\"Live Bus Monitor\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-2\",children:\"Real-time tracking of all active buses\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-3 h-3 rounded-full bg-green-500 animate-pulse\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-medium text-green-700\",children:[buses.filter(b=>b.status==='moving').length,\" Active\"]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleRefresh,disabled:loading,className:\"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors flex items-center gap-2 disabled:opacity-50\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-sync-alt \".concat(loading?'animate-spin':'')}),\"Refresh\"]}),/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center gap-2 cursor-pointer\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:autoRefresh,onChange:e=>setAutoRefresh(e.target.checked),className:\"h-4 w-4 text-blue-600 rounded focus:ring-blue-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-700\",children:\"Auto-refresh\"})]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col lg:flex-row gap-6 h-[calc(100vh-200px)]\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 relative\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden h-full\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-4 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-gray-900\",children:\"Live Tracking Map\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"select\",{value:statusFilter,onChange:e=>setStatusFilter(e.target.value),className:\"px-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All Buses\"}),/*#__PURE__*/_jsx(\"option\",{value:\"moving\",children:\"Moving Only\"}),/*#__PURE__*/_jsx(\"option\",{value:\"stopped\",children:\"Stopped Only\"}),/*#__PURE__*/_jsx(\"option\",{value:\"delayed\",children:\"Delayed Only\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowBusList(!showBusList),className:\"px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-list\"}),showBusList?'Hide List':'Show List']})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"h-[calc(100%-80px)] relative\",children:[loading?/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 flex items-center justify-center bg-white bg-opacity-75 z-10\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-gray-600\",children:\"Loading map data...\"})]})}):/*#__PURE__*/_jsx(MapComponent,{center:calculateMapCenter(),zoom:selectedBus?15:13,markers:mapMarkers,interactive:true,className:\"rounded-b-xl\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"absolute bottom-4 left-4 bg-white rounded-lg shadow-lg p-4 z-20 border border-gray-200\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900 mb-2\",children:\"Legend\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 rounded-full bg-green-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-700\",children:\"Moving\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 rounded-full bg-yellow-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-700\",children:\"Stopped\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 rounded-full bg-red-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-700\",children:\"Delayed\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 rounded-full bg-gray-400\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-700\",children:\"Offline\"})]})]})]}),autoRefresh&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute top-4 right-4 bg-blue-500 text-white px-3 py-1 rounded-full text-sm font-medium z-20\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-clock mr-2\"}),\"Auto-refresh: 10s\"]})]})]})}),showBusList&&/*#__PURE__*/_jsx(\"div\",{className:\"lg:w-96\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-lg border border-gray-200 h-full overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-4 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50\",children:/*#__PURE__*/_jsxs(\"h2\",{className:\"text-lg font-semibold text-gray-900\",children:[\"Bus List (\",filteredBuses.length,\")\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-y-auto h-[calc(100%-80px)]\",children:filteredBuses.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"p-8 text-center\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-bus-slash text-4xl text-gray-300 mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"No buses found\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"divide-y divide-gray-200\",children:filteredBuses.map(bus=>{var _bus$students2;return/*#__PURE__*/_jsx(\"div\",{className:\"p-4 hover:bg-gray-50 cursor-pointer transition-colors \".concat((selectedBus===null||selectedBus===void 0?void 0:selectedBus._id)===bus._id?'bg-blue-50 border-l-4 border-blue-500':''),onClick:()=>handleBusClick(bus),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 mb-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-lg flex items-center justify-center text-white\",style:{background:getStatusColor(bus.status)},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas \".concat(getStatusIcon(bus.status))})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"font-semibold text-gray-900\",children:[\"Bus \",bus.busNumber]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:bus.routeName||'No route'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-2 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-user text-gray-400\"}),/*#__PURE__*/_jsx(\"span\",{children:bus.driverName||'No driver'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-users text-gray-400\"}),/*#__PURE__*/_jsxs(\"span\",{children:[((_bus$students2=bus.students)===null||_bus$students2===void 0?void 0:_bus$students2.length)||0,\" students\"]})]})]}),bus.latitude&&bus.longitude&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 text-xs text-gray-500\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-map-marker-alt mr-1\"}),bus.latitude.toFixed(4),\", \",bus.longitude.toFixed(4)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 text-xs font-semibold rounded-full\",style:{background:getStatusColor(bus.status)+'20',color:getStatusColor(bus.status)},children:bus.status||'Offline'}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 text-xs text-gray-500\",children:bus.updatedAt?new Date(bus.updatedAt).toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'}):'Never'})]})]})},bus._id);})})})]})})]}),selectedBus&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-xl shadow-lg border border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-xl font-bold text-gray-900\",children:[\"Bus \",selectedBus.busNumber,\" Details\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600\",children:[\"Currently \",selectedBus.status]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedBus(null),className:\"text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times text-xl\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-gray-500 uppercase mb-2\",children:\"Basic Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Bus ID:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:selectedBus.busId||'---'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Route:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:selectedBus.routeName||'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Capacity:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[selectedBus.capacity||40,\" seats\"]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-gray-500 uppercase mb-2\",children:\"Driver Information\"}),selectedBus.driverName?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-user\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:selectedBus.driverName}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:((_selectedBus$driverId=selectedBus.driverId)===null||_selectedBus$driverId===void 0?void 0:_selectedBus$driverId.email)||''})]})]})}):/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 italic\",children:\"No driver assigned\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-gray-500 uppercase mb-2\",children:\"Location & Status\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Current Status:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium capitalize\",children:selectedBus.status||'offline'})]}),selectedBus.latitude&&selectedBus.longitude?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Latitude:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:selectedBus.latitude.toFixed(6)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Longitude:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:selectedBus.longitude.toFixed(6)})]}),selectedBus.speed&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Speed:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[selectedBus.speed,\" km/h\"]})]})]}):/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 italic\",children:\"No location data\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Last Updated:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:selectedBus.updatedAt?new Date(selectedBus.updatedAt).toLocaleString():'Never'})]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-gray-500 uppercase mb-2\",children:\"Quick Actions\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>window.open(\"https://www.google.com/maps?q=\".concat(selectedBus.latitude,\",\").concat(selectedBus.longitude),'_blank'),disabled:!selectedBus.latitude,className:\"w-full px-4 py-2 bg-blue-50 text-blue-700 rounded-lg font-medium hover:bg-blue-100 transition-colors flex items-center justify-center gap-2 disabled:opacity-50\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-external-link-alt\"}),\"Open in Google Maps\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{var _selectedBus$driverId2;return window.open(\"tel:\".concat((_selectedBus$driverId2=selectedBus.driverId)===null||_selectedBus$driverId2===void 0?void 0:_selectedBus$driverId2.phone));},disabled:!((_selectedBus$driverId3=selectedBus.driverId)!==null&&_selectedBus$driverId3!==void 0&&_selectedBus$driverId3.phone),className:\"w-full px-4 py-2 bg-green-50 text-green-700 rounded-lg font-medium hover:bg-green-100 transition-colors flex items-center justify-center gap-2 disabled:opacity-50\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-phone\"}),\"Call Driver\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigator.clipboard.writeText(\"Bus \".concat(selectedBus.busNumber,\" - \").concat(selectedBus.routeName||'')),className:\"w-full px-4 py-2 bg-purple-50 text-purple-700 rounded-lg font-medium hover:bg-purple-100 transition-colors flex items-center justify-center gap-2\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-copy\"}),\"Copy Bus Info\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>window.open(\"/admin/buses?edit=\".concat(selectedBus._id),'_blank'),className:\"w-full px-4 py-2 bg-gray-50 text-gray-700 rounded-lg font-medium hover:bg-gray-100 transition-colors flex items-center justify-center gap-2\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"}),\"Edit Bus Details\"]})]})]})})]})]})})})]});};export default LiveMonitor;","map":{"version":3,"names":["React","useState","useEffect","useCallback","MapComponent","busService","useSocket","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","LiveMonitor","_selectedBus$driverId","_selectedBus$driverId3","buses","setBuses","loading","setLoading","selectedBus","setSelectedBus","statusFilter","setStatusFilter","showBusList","setShowBusList","autoRefresh","setAutoRefresh","socket","fetchBuses","handleBusUpdate","data","prev","map","bus","_id","busId","_objectSpread","updatedAt","Date","on","off","interval","setInterval","clearInterval","busesData","getLiveBuses","error","console","handleRefresh","handleBusClick","handleUpdateLocation","locationData","updateBusLocation","getStatusColor","status","toLowerCase","getStatusIcon","filteredBuses","filter","mapMarkers","latitude","longitude","_bus$students","position","lat","lng","iconHtml","concat","iconSize","iconAnchor","popup","busNumber","routeName","driverName","students","length","toLocaleTimeString","onClick","calculateMapCenter","validBuses","b","avgLat","reduce","sum","avgLng","children","className","disabled","type","checked","onChange","e","target","value","center","zoom","markers","interactive","_bus$students2","style","background","toFixed","color","hour","minute","capacity","driverId","email","speed","toLocaleString","window","open","_selectedBus$driverId2","phone","navigator","clipboard","writeText"],"sources":["/home/project/client/src/components/Admin/LiveMonitor.jsx"],"sourcesContent":["// client/src/components/Admin/LiveMonitor.jsx\nimport React, { useState, useEffect, useCallback } from 'react';\nimport MapComponent from '../Common/MapComponent';\nimport { busService } from '../../services/busService';\nimport { useSocket } from '../../contexts/SocketContext';\n\nconst LiveMonitor = () => {\n  const [buses, setBuses] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [selectedBus, setSelectedBus] = useState(null);\n  const [statusFilter, setStatusFilter] = useState('all');\n  const [showBusList, setShowBusList] = useState(true);\n  const [autoRefresh, setAutoRefresh] = useState(true);\n  const { socket } = useSocket();\n\n  // Fetch initial bus data\n  useEffect(() => {\n    fetchBuses();\n  }, []);\n\n  // Setup socket listeners for real-time updates\n  useEffect(() => {\n    if (!socket) return;\n\n    const handleBusUpdate = (data) => {\n      setBuses(prev => prev.map(bus => \n        bus._id === data.busId \n          ? { ...bus, ...data, updatedAt: new Date() }\n          : bus\n      ));\n    };\n\n    socket.on('bus-update', handleBusUpdate);\n    socket.on('bus-live-update', handleBusUpdate);\n\n    return () => {\n      socket.off('bus-update', handleBusUpdate);\n      socket.off('bus-live-update', handleBusUpdate);\n    };\n  }, [socket]);\n\n  // Auto-refresh every 10 seconds\n  useEffect(() => {\n    if (!autoRefresh) return;\n\n    const interval = setInterval(() => {\n      fetchBuses();\n    }, 10000);\n\n    return () => clearInterval(interval);\n  }, [autoRefresh]);\n\n  const fetchBuses = async () => {\n    try {\n      const busesData = await busService.getLiveBuses();\n      setBuses(busesData || []);\n    } catch (error) {\n      console.error('Error fetching buses:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleRefresh = () => {\n    setLoading(true);\n    fetchBuses();\n  };\n\n  const handleBusClick = (bus) => {\n    setSelectedBus(bus);\n  };\n\n  const handleUpdateLocation = async (busId, locationData) => {\n    try {\n      await busService.updateBusLocation(busId, locationData);\n      fetchBuses();\n    } catch (error) {\n      console.error('Error updating location:', error);\n    }\n  };\n\n  const getStatusColor = (status) => {\n    switch (status?.toLowerCase()) {\n      case 'moving': return '#10b981';\n      case 'stopped': return '#f59e0b';\n      case 'delayed': return '#ef4444';\n      default: return '#94a3b8';\n    }\n  };\n\n  const getStatusIcon = (status) => {\n    switch (status?.toLowerCase()) {\n      case 'moving': return 'fa-play';\n      case 'stopped': return 'fa-pause';\n      case 'delayed': return 'fa-exclamation-triangle';\n      default: return 'fa-question-circle';\n    }\n  };\n\n  const filteredBuses = buses.filter(bus => \n    statusFilter === 'all' || bus.status === statusFilter\n  );\n\n  // Prepare map markers\n  const mapMarkers = filteredBuses\n    .filter(bus => bus.latitude && bus.longitude)\n    .map(bus => ({\n      position: { lat: bus.latitude, lng: bus.longitude },\n      iconHtml: `\n        <div style=\"\n          width: 50px;\n          height: 50px;\n          background: ${getStatusColor(bus.status)};\n          border-radius: 50%;\n          border: 3px solid white;\n          box-shadow: 0 4px 15px rgba(0,0,0,0.2);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: white;\n          font-size: 1.2rem;\n          cursor: pointer;\n        \" onclick=\"event.stopPropagation();\">\n          <i class=\"fas fa-bus\"></i>\n        </div>\n      `,\n      iconSize: [50, 50],\n      iconAnchor: [25, 50],\n      popup: `\n        <div style=\"padding: 10px; min-width: 200px;\">\n          <strong>Bus ${bus.busNumber}</strong><br>\n          Route: ${bus.routeName || 'N/A'}<br>\n          Status: ${bus.status || 'Offline'}<br>\n          Driver: ${bus.driverName || 'N/A'}<br>\n          Students: ${bus.students?.length || 0}<br>\n          <small>Updated: ${new Date(bus.updatedAt).toLocaleTimeString()}</small>\n        </div>\n      `,\n      onClick: () => handleBusClick(bus)\n    }));\n\n  // Calculate center point for all buses\n  const calculateMapCenter = () => {\n    if (selectedBus?.latitude && selectedBus?.longitude) {\n      return [selectedBus.latitude, selectedBus.longitude];\n    }\n\n    const validBuses = filteredBuses.filter(b => b.latitude && b.longitude);\n    if (validBuses.length === 0) return [20.5937, 78.9629];\n\n    const avgLat = validBuses.reduce((sum, bus) => sum + bus.latitude, 0) / validBuses.length;\n    const avgLng = validBuses.reduce((sum, bus) => sum + bus.longitude, 0) / validBuses.length;\n    \n    return [avgLat, avgLng];\n  };\n\n  return (\n    <div>\n      {/* Header */}\n      <div className=\"mb-8\">\n        <div className=\"flex flex-col md:flex-row md:items-center md:justify-between gap-4\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-900\">Live Bus Monitor</h1>\n            <p className=\"text-gray-600 mt-2\">\n              Real-time tracking of all active buses\n            </p>\n          </div>\n          \n          <div className=\"flex flex-wrap items-center gap-4\">\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-3 h-3 rounded-full bg-green-500 animate-pulse\"></div>\n              <span className=\"text-sm font-medium text-green-700\">\n                {buses.filter(b => b.status === 'moving').length} Active\n              </span>\n            </div>\n            \n            <button\n              onClick={handleRefresh}\n              disabled={loading}\n              className=\"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors flex items-center gap-2 disabled:opacity-50\"\n            >\n              <i className={`fas fa-sync-alt ${loading ? 'animate-spin' : ''}`}></i>\n              Refresh\n            </button>\n            \n            <label className=\"flex items-center gap-2 cursor-pointer\">\n              <input\n                type=\"checkbox\"\n                checked={autoRefresh}\n                onChange={(e) => setAutoRefresh(e.target.checked)}\n                className=\"h-4 w-4 text-blue-600 rounded focus:ring-blue-500\"\n              />\n              <span className=\"text-sm text-gray-700\">Auto-refresh</span>\n            </label>\n          </div>\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <div className=\"flex flex-col lg:flex-row gap-6 h-[calc(100vh-200px)]\">\n        {/* Map Container */}\n        <div className=\"flex-1 relative\">\n          <div className=\"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden h-full\">\n            <div className=\"p-4 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50\">\n              <div className=\"flex items-center justify-between\">\n                <h2 className=\"text-lg font-semibold text-gray-900\">\n                  Live Tracking Map\n                </h2>\n                <div className=\"flex items-center gap-4\">\n                  <select\n                    value={statusFilter}\n                    onChange={(e) => setStatusFilter(e.target.value)}\n                    className=\"px-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  >\n                    <option value=\"all\">All Buses</option>\n                    <option value=\"moving\">Moving Only</option>\n                    <option value=\"stopped\">Stopped Only</option>\n                    <option value=\"delayed\">Delayed Only</option>\n                  </select>\n                  \n                  <button\n                    onClick={() => setShowBusList(!showBusList)}\n                    className=\"px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors flex items-center gap-2\"\n                  >\n                    <i className=\"fas fa-list\"></i>\n                    {showBusList ? 'Hide List' : 'Show List'}\n                  </button>\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"h-[calc(100%-80px)] relative\">\n              {loading ? (\n                <div className=\"absolute inset-0 flex items-center justify-center bg-white bg-opacity-75 z-10\">\n                  <div className=\"text-center\">\n                    <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto\"></div>\n                    <p className=\"mt-4 text-gray-600\">Loading map data...</p>\n                  </div>\n                </div>\n              ) : (\n                <MapComponent\n                  center={calculateMapCenter()}\n                  zoom={selectedBus ? 15 : 13}\n                  markers={mapMarkers}\n                  interactive={true}\n                  className=\"rounded-b-xl\"\n                />\n              )}\n              \n              {/* Legend */}\n              <div className=\"absolute bottom-4 left-4 bg-white rounded-lg shadow-lg p-4 z-20 border border-gray-200\">\n                <h4 className=\"font-medium text-gray-900 mb-2\">Legend</h4>\n                <div className=\"space-y-2\">\n                  <div className=\"flex items-center gap-2\">\n                    <div className=\"w-4 h-4 rounded-full bg-green-500\"></div>\n                    <span className=\"text-sm text-gray-700\">Moving</span>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <div className=\"w-4 h-4 rounded-full bg-yellow-500\"></div>\n                    <span className=\"text-sm text-gray-700\">Stopped</span>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <div className=\"w-4 h-4 rounded-full bg-red-500\"></div>\n                    <span className=\"text-sm text-gray-700\">Delayed</span>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <div className=\"w-4 h-4 rounded-full bg-gray-400\"></div>\n                    <span className=\"text-sm text-gray-700\">Offline</span>\n                  </div>\n                </div>\n              </div>\n              \n              {/* Refresh Timer */}\n              {autoRefresh && (\n                <div className=\"absolute top-4 right-4 bg-blue-500 text-white px-3 py-1 rounded-full text-sm font-medium z-20\">\n                  <i className=\"fas fa-clock mr-2\"></i>\n                  Auto-refresh: 10s\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Bus List Sidebar */}\n        {showBusList && (\n          <div className=\"lg:w-96\">\n            <div className=\"bg-white rounded-xl shadow-lg border border-gray-200 h-full overflow-hidden\">\n              <div className=\"p-4 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50\">\n                <h2 className=\"text-lg font-semibold text-gray-900\">\n                  Bus List ({filteredBuses.length})\n                </h2>\n              </div>\n              \n              <div className=\"overflow-y-auto h-[calc(100%-80px)]\">\n                {filteredBuses.length === 0 ? (\n                  <div className=\"p-8 text-center\">\n                    <i className=\"fas fa-bus-slash text-4xl text-gray-300 mb-4\"></i>\n                    <p className=\"text-gray-500\">No buses found</p>\n                  </div>\n                ) : (\n                  <div className=\"divide-y divide-gray-200\">\n                    {filteredBuses.map((bus) => (\n                      <div\n                        key={bus._id}\n                        className={`p-4 hover:bg-gray-50 cursor-pointer transition-colors ${\n                          selectedBus?._id === bus._id ? 'bg-blue-50 border-l-4 border-blue-500' : ''\n                        }`}\n                        onClick={() => handleBusClick(bus)}\n                      >\n                        <div className=\"flex items-start justify-between\">\n                          <div className=\"flex-1\">\n                            <div className=\"flex items-center gap-3 mb-2\">\n                              <div\n                                className=\"w-10 h-10 rounded-lg flex items-center justify-center text-white\"\n                                style={{ background: getStatusColor(bus.status) }}\n                              >\n                                <i className={`fas ${getStatusIcon(bus.status)}`}></i>\n                              </div>\n                              <div>\n                                <h3 className=\"font-semibold text-gray-900\">\n                                  Bus {bus.busNumber}\n                                </h3>\n                                <p className=\"text-sm text-gray-600\">{bus.routeName || 'No route'}</p>\n                              </div>\n                            </div>\n                            \n                            <div className=\"grid grid-cols-2 gap-2 text-sm\">\n                              <div className=\"flex items-center gap-1\">\n                                <i className=\"fas fa-user text-gray-400\"></i>\n                                <span>{bus.driverName || 'No driver'}</span>\n                              </div>\n                              <div className=\"flex items-center gap-1\">\n                                <i className=\"fas fa-users text-gray-400\"></i>\n                                <span>{bus.students?.length || 0} students</span>\n                              </div>\n                            </div>\n                            \n                            {bus.latitude && bus.longitude && (\n                              <div className=\"mt-2 text-xs text-gray-500\">\n                                <i className=\"fas fa-map-marker-alt mr-1\"></i>\n                                {bus.latitude.toFixed(4)}, {bus.longitude.toFixed(4)}\n                              </div>\n                            )}\n                          </div>\n                          \n                          <div className=\"text-right\">\n                            <span\n                              className=\"px-2 py-1 text-xs font-semibold rounded-full\"\n                              style={{\n                                background: getStatusColor(bus.status) + '20',\n                                color: getStatusColor(bus.status)\n                              }}\n                            >\n                              {bus.status || 'Offline'}\n                            </span>\n                            <div className=\"mt-2 text-xs text-gray-500\">\n                              {bus.updatedAt ? new Date(bus.updatedAt).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }) : 'Never'}\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Selected Bus Details Panel */}\n      {selectedBus && (\n        <div className=\"mt-6\">\n          <div className=\"bg-white rounded-xl shadow-lg border border-gray-200\">\n            <div className=\"p-6\">\n              <div className=\"flex items-center justify-between mb-6\">\n                <div>\n                  <h2 className=\"text-xl font-bold text-gray-900\">\n                    Bus {selectedBus.busNumber} Details\n                  </h2>\n                  <p className=\"text-gray-600\">Currently {selectedBus.status}</p>\n                </div>\n                <button\n                  onClick={() => setSelectedBus(null)}\n                  className=\"text-gray-400 hover:text-gray-600\"\n                >\n                  <i className=\"fas fa-times text-xl\"></i>\n                </button>\n              </div>\n              \n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                {/* Basic Info */}\n                <div className=\"space-y-4\">\n                  <div>\n                    <h3 className=\"text-sm font-medium text-gray-500 uppercase mb-2\">\n                      Basic Information\n                    </h3>\n                    <div className=\"space-y-3\">\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-gray-600\">Bus ID:</span>\n                        <span className=\"font-medium\">{selectedBus.busId || '---'}</span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-gray-600\">Route:</span>\n                        <span className=\"font-medium\">{selectedBus.routeName || 'N/A'}</span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-gray-600\">Capacity:</span>\n                        <span className=\"font-medium\">{selectedBus.capacity || 40} seats</span>\n                      </div>\n                    </div>\n                  </div>\n                  \n                  <div>\n                    <h3 className=\"text-sm font-medium text-gray-500 uppercase mb-2\">\n                      Driver Information\n                    </h3>\n                    {selectedBus.driverName ? (\n                      <div className=\"space-y-3\">\n                        <div className=\"flex items-center gap-3\">\n                          <div className=\"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600\">\n                            <i className=\"fas fa-user\"></i>\n                          </div>\n                          <div>\n                            <p className=\"font-medium\">{selectedBus.driverName}</p>\n                            <p className=\"text-sm text-gray-500\">{selectedBus.driverId?.email || ''}</p>\n                          </div>\n                        </div>\n                      </div>\n                    ) : (\n                      <p className=\"text-gray-500 italic\">No driver assigned</p>\n                    )}\n                  </div>\n                </div>\n                \n                {/* Location Info */}\n                <div className=\"space-y-4\">\n                  <div>\n                    <h3 className=\"text-sm font-medium text-gray-500 uppercase mb-2\">\n                      Location & Status\n                    </h3>\n                    <div className=\"space-y-3\">\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-gray-600\">Current Status:</span>\n                        <span className=\"font-medium capitalize\">{selectedBus.status || 'offline'}</span>\n                      </div>\n                      {selectedBus.latitude && selectedBus.longitude ? (\n                        <>\n                          <div className=\"flex justify-between\">\n                            <span className=\"text-gray-600\">Latitude:</span>\n                            <span className=\"font-medium\">{selectedBus.latitude.toFixed(6)}</span>\n                          </div>\n                          <div className=\"flex justify-between\">\n                            <span className=\"text-gray-600\">Longitude:</span>\n                            <span className=\"font-medium\">{selectedBus.longitude.toFixed(6)}</span>\n                          </div>\n                          {selectedBus.speed && (\n                            <div className=\"flex justify-between\">\n                              <span className=\"text-gray-600\">Speed:</span>\n                              <span className=\"font-medium\">{selectedBus.speed} km/h</span>\n                            </div>\n                          )}\n                        </>\n                      ) : (\n                        <p className=\"text-gray-500 italic\">No location data</p>\n                      )}\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-gray-600\">Last Updated:</span>\n                        <span className=\"font-medium\">\n                          {selectedBus.updatedAt ? new Date(selectedBus.updatedAt).toLocaleString() : 'Never'}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                \n                {/* Quick Actions */}\n                <div className=\"space-y-4\">\n                  <div>\n                    <h3 className=\"text-sm font-medium text-gray-500 uppercase mb-2\">\n                      Quick Actions\n                    </h3>\n                    <div className=\"space-y-3\">\n                      <button\n                        onClick={() => window.open(`https://www.google.com/maps?q=${selectedBus.latitude},${selectedBus.longitude}`, '_blank')}\n                        disabled={!selectedBus.latitude}\n                        className=\"w-full px-4 py-2 bg-blue-50 text-blue-700 rounded-lg font-medium hover:bg-blue-100 transition-colors flex items-center justify-center gap-2 disabled:opacity-50\"\n                      >\n                        <i className=\"fas fa-external-link-alt\"></i>\n                        Open in Google Maps\n                      </button>\n                      \n                      <button\n                        onClick={() => window.open(`tel:${selectedBus.driverId?.phone}`)}\n                        disabled={!selectedBus.driverId?.phone}\n                        className=\"w-full px-4 py-2 bg-green-50 text-green-700 rounded-lg font-medium hover:bg-green-100 transition-colors flex items-center justify-center gap-2 disabled:opacity-50\"\n                      >\n                        <i className=\"fas fa-phone\"></i>\n                        Call Driver\n                      </button>\n                      \n                      <button\n                        onClick={() => navigator.clipboard.writeText(`Bus ${selectedBus.busNumber} - ${selectedBus.routeName || ''}`)}\n                        className=\"w-full px-4 py-2 bg-purple-50 text-purple-700 rounded-lg font-medium hover:bg-purple-100 transition-colors flex items-center justify-center gap-2\"\n                      >\n                        <i className=\"fas fa-copy\"></i>\n                        Copy Bus Info\n                      </button>\n                      \n                      <button\n                        onClick={() => window.open(`/admin/buses?edit=${selectedBus._id}`, '_blank')}\n                        className=\"w-full px-4 py-2 bg-gray-50 text-gray-700 rounded-lg font-medium hover:bg-gray-100 transition-colors flex items-center justify-center gap-2\"\n                      >\n                        <i className=\"fas fa-edit\"></i>\n                        Edit Bus Details\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default LiveMonitor;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}