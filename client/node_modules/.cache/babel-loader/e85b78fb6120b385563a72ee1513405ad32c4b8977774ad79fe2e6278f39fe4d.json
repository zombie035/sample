{"ast":null,"code":"// client/src/hooks/useGeolocation.js\nimport { useState, useEffect, useCallback } from 'react';\nconst useGeolocation = (options = {}) => {\n  const [location, setLocation] = useState(null);\n  const [error, setError] = useState(null);\n  const [isTracking, setIsTracking] = useState(false);\n  const [watchId, setWatchId] = useState(null);\n  const defaultOptions = {\n    enableHighAccuracy: true,\n    timeout: 5000,\n    maximumAge: 0,\n    ...options\n  };\n  const getCurrentPosition = useCallback(() => {\n    return new Promise((resolve, reject) => {\n      if (!navigator.geolocation) {\n        reject(new Error('Geolocation is not supported by your browser'));\n        return;\n      }\n      navigator.geolocation.getCurrentPosition(position => {\n        const locationData = {\n          latitude: position.coords.latitude,\n          longitude: position.coords.longitude,\n          accuracy: position.coords.accuracy,\n          speed: position.coords.speed,\n          heading: position.coords.heading,\n          timestamp: position.timestamp\n        };\n        setLocation(locationData);\n        resolve(locationData);\n      }, error => {\n        const errorMsg = getErrorMessage(error);\n        setError(errorMsg);\n        reject(new Error(errorMsg));\n      }, defaultOptions);\n    });\n  }, []);\n  const startTracking = useCallback(onLocationUpdate => {\n    if (!navigator.geolocation) {\n      setError('Geolocation is not supported by your browser');\n      return null;\n    }\n    if (isTracking) {\n      console.warn('Geolocation is already being tracked');\n      return watchId;\n    }\n    const id = navigator.geolocation.watchPosition(position => {\n      const locationData = {\n        latitude: position.coords.latitude,\n        longitude: position.coords.longitude,\n        accuracy: position.coords.accuracy,\n        speed: position.coords.speed,\n        heading: position.coords.heading,\n        timestamp: position.timestamp\n      };\n      setLocation(locationData);\n      if (onLocationUpdate) {\n        onLocationUpdate(locationData);\n      }\n    }, error => {\n      setError(getErrorMessage(error));\n    }, defaultOptions);\n    setWatchId(id);\n    setIsTracking(true);\n    return id;\n  }, [isTracking, watchId]);\n  const stopTracking = useCallback(() => {\n    if (watchId) {\n      navigator.geolocation.clearWatch(watchId);\n      setWatchId(null);\n      setIsTracking(false);\n    }\n  }, [watchId]);\n  const getErrorMessage = error => {\n    switch (error.code) {\n      case error.PERMISSION_DENIED:\n        return 'Location access denied. Please enable location services.';\n      case error.POSITION_UNAVAILABLE:\n        return 'Location information is unavailable.';\n      case error.TIMEOUT:\n        return 'Location request timed out.';\n      default:\n        return 'An unknown error occurred while getting location.';\n    }\n  };\n  useEffect(() => {\n    // Clean up on unmount\n    return () => {\n      if (watchId) {\n        navigator.geolocation.clearWatch(watchId);\n      }\n    };\n  }, [watchId]);\n  return {\n    location,\n    error,\n    isTracking,\n    getCurrentPosition,\n    startTracking,\n    stopTracking,\n    hasPermission: !!location || !error,\n    isSupported: !!navigator.geolocation\n  };\n};\nexport default useGeolocation;","map":{"version":3,"names":["useState","useEffect","useCallback","useGeolocation","options","location","setLocation","error","setError","isTracking","setIsTracking","watchId","setWatchId","defaultOptions","enableHighAccuracy","timeout","maximumAge","getCurrentPosition","Promise","resolve","reject","navigator","geolocation","Error","position","locationData","latitude","coords","longitude","accuracy","speed","heading","timestamp","errorMsg","getErrorMessage","startTracking","onLocationUpdate","console","warn","id","watchPosition","stopTracking","clearWatch","code","PERMISSION_DENIED","POSITION_UNAVAILABLE","TIMEOUT","hasPermission","isSupported"],"sources":["/home/project/client/src/hooks/useGeolocation.js"],"sourcesContent":["// client/src/hooks/useGeolocation.js\nimport { useState, useEffect, useCallback } from 'react';\n\nconst useGeolocation = (options = {}) => {\n  const [location, setLocation] = useState(null);\n  const [error, setError] = useState(null);\n  const [isTracking, setIsTracking] = useState(false);\n  const [watchId, setWatchId] = useState(null);\n\n  const defaultOptions = {\n    enableHighAccuracy: true,\n    timeout: 5000,\n    maximumAge: 0,\n    ...options\n  };\n\n  const getCurrentPosition = useCallback(() => {\n    return new Promise((resolve, reject) => {\n      if (!navigator.geolocation) {\n        reject(new Error('Geolocation is not supported by your browser'));\n        return;\n      }\n\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          const locationData = {\n            latitude: position.coords.latitude,\n            longitude: position.coords.longitude,\n            accuracy: position.coords.accuracy,\n            speed: position.coords.speed,\n            heading: position.coords.heading,\n            timestamp: position.timestamp\n          };\n          setLocation(locationData);\n          resolve(locationData);\n        },\n        (error) => {\n          const errorMsg = getErrorMessage(error);\n          setError(errorMsg);\n          reject(new Error(errorMsg));\n        },\n        defaultOptions\n      );\n    });\n  }, []);\n\n  const startTracking = useCallback((onLocationUpdate) => {\n    if (!navigator.geolocation) {\n      setError('Geolocation is not supported by your browser');\n      return null;\n    }\n\n    if (isTracking) {\n      console.warn('Geolocation is already being tracked');\n      return watchId;\n    }\n\n    const id = navigator.geolocation.watchPosition(\n      (position) => {\n        const locationData = {\n          latitude: position.coords.latitude,\n          longitude: position.coords.longitude,\n          accuracy: position.coords.accuracy,\n          speed: position.coords.speed,\n          heading: position.coords.heading,\n          timestamp: position.timestamp\n        };\n        setLocation(locationData);\n        if (onLocationUpdate) {\n          onLocationUpdate(locationData);\n        }\n      },\n      (error) => {\n        setError(getErrorMessage(error));\n      },\n      defaultOptions\n    );\n\n    setWatchId(id);\n    setIsTracking(true);\n    return id;\n  }, [isTracking, watchId]);\n\n  const stopTracking = useCallback(() => {\n    if (watchId) {\n      navigator.geolocation.clearWatch(watchId);\n      setWatchId(null);\n      setIsTracking(false);\n    }\n  }, [watchId]);\n\n  const getErrorMessage = (error) => {\n    switch (error.code) {\n      case error.PERMISSION_DENIED:\n        return 'Location access denied. Please enable location services.';\n      case error.POSITION_UNAVAILABLE:\n        return 'Location information is unavailable.';\n      case error.TIMEOUT:\n        return 'Location request timed out.';\n      default:\n        return 'An unknown error occurred while getting location.';\n    }\n  };\n\n  useEffect(() => {\n    // Clean up on unmount\n    return () => {\n      if (watchId) {\n        navigator.geolocation.clearWatch(watchId);\n      }\n    };\n  }, [watchId]);\n\n  return {\n    location,\n    error,\n    isTracking,\n    getCurrentPosition,\n    startTracking,\n    stopTracking,\n    hasPermission: !!location || !error,\n    isSupported: !!navigator.geolocation\n  };\n};\n\nexport default useGeolocation;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}