{"ast":null,"code":"import _objectSpread from\"/home/project/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// client/src/hooks/useGeolocation.js\nimport{useState,useEffect,useCallback}from'react';const useGeolocation=function(){let options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};const[location,setLocation]=useState(null);const[error,setError]=useState(null);const[isTracking,setIsTracking]=useState(false);const[watchId,setWatchId]=useState(null);const defaultOptions=_objectSpread({enableHighAccuracy:true,timeout:5000,maximumAge:0},options);const getCurrentPosition=useCallback(()=>{return new Promise((resolve,reject)=>{if(!navigator.geolocation){reject(new Error('Geolocation is not supported by your browser'));return;}navigator.geolocation.getCurrentPosition(position=>{const locationData={latitude:position.coords.latitude,longitude:position.coords.longitude,accuracy:position.coords.accuracy,speed:position.coords.speed,heading:position.coords.heading,timestamp:position.timestamp};setLocation(locationData);resolve(locationData);},error=>{const errorMsg=getErrorMessage(error);setError(errorMsg);reject(new Error(errorMsg));},defaultOptions);});},[]);const startTracking=useCallback(onLocationUpdate=>{if(!navigator.geolocation){setError('Geolocation is not supported by your browser');return null;}if(isTracking){console.warn('Geolocation is already being tracked');return watchId;}const id=navigator.geolocation.watchPosition(position=>{const locationData={latitude:position.coords.latitude,longitude:position.coords.longitude,accuracy:position.coords.accuracy,speed:position.coords.speed,heading:position.coords.heading,timestamp:position.timestamp};setLocation(locationData);if(onLocationUpdate){onLocationUpdate(locationData);}},error=>{setError(getErrorMessage(error));},defaultOptions);setWatchId(id);setIsTracking(true);return id;},[isTracking,watchId]);const stopTracking=useCallback(()=>{if(watchId){navigator.geolocation.clearWatch(watchId);setWatchId(null);setIsTracking(false);}},[watchId]);const getErrorMessage=error=>{switch(error.code){case error.PERMISSION_DENIED:return'Location access denied. Please enable location services.';case error.POSITION_UNAVAILABLE:return'Location information is unavailable.';case error.TIMEOUT:return'Location request timed out.';default:return'An unknown error occurred while getting location.';}};useEffect(()=>{// Clean up on unmount\nreturn()=>{if(watchId){navigator.geolocation.clearWatch(watchId);}};},[watchId]);return{location,error,isTracking,getCurrentPosition,startTracking,stopTracking,hasPermission:!!location||!error,isSupported:!!navigator.geolocation};};export default useGeolocation;","map":{"version":3,"names":["useState","useEffect","useCallback","useGeolocation","options","arguments","length","undefined","location","setLocation","error","setError","isTracking","setIsTracking","watchId","setWatchId","defaultOptions","_objectSpread","enableHighAccuracy","timeout","maximumAge","getCurrentPosition","Promise","resolve","reject","navigator","geolocation","Error","position","locationData","latitude","coords","longitude","accuracy","speed","heading","timestamp","errorMsg","getErrorMessage","startTracking","onLocationUpdate","console","warn","id","watchPosition","stopTracking","clearWatch","code","PERMISSION_DENIED","POSITION_UNAVAILABLE","TIMEOUT","hasPermission","isSupported"],"sources":["/home/project/client/src/hooks/useGeolocation.js"],"sourcesContent":["// client/src/hooks/useGeolocation.js\nimport { useState, useEffect, useCallback } from 'react';\n\nconst useGeolocation = (options = {}) => {\n  const [location, setLocation] = useState(null);\n  const [error, setError] = useState(null);\n  const [isTracking, setIsTracking] = useState(false);\n  const [watchId, setWatchId] = useState(null);\n\n  const defaultOptions = {\n    enableHighAccuracy: true,\n    timeout: 5000,\n    maximumAge: 0,\n    ...options\n  };\n\n  const getCurrentPosition = useCallback(() => {\n    return new Promise((resolve, reject) => {\n      if (!navigator.geolocation) {\n        reject(new Error('Geolocation is not supported by your browser'));\n        return;\n      }\n\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          const locationData = {\n            latitude: position.coords.latitude,\n            longitude: position.coords.longitude,\n            accuracy: position.coords.accuracy,\n            speed: position.coords.speed,\n            heading: position.coords.heading,\n            timestamp: position.timestamp\n          };\n          setLocation(locationData);\n          resolve(locationData);\n        },\n        (error) => {\n          const errorMsg = getErrorMessage(error);\n          setError(errorMsg);\n          reject(new Error(errorMsg));\n        },\n        defaultOptions\n      );\n    });\n  }, []);\n\n  const startTracking = useCallback((onLocationUpdate) => {\n    if (!navigator.geolocation) {\n      setError('Geolocation is not supported by your browser');\n      return null;\n    }\n\n    if (isTracking) {\n      console.warn('Geolocation is already being tracked');\n      return watchId;\n    }\n\n    const id = navigator.geolocation.watchPosition(\n      (position) => {\n        const locationData = {\n          latitude: position.coords.latitude,\n          longitude: position.coords.longitude,\n          accuracy: position.coords.accuracy,\n          speed: position.coords.speed,\n          heading: position.coords.heading,\n          timestamp: position.timestamp\n        };\n        setLocation(locationData);\n        if (onLocationUpdate) {\n          onLocationUpdate(locationData);\n        }\n      },\n      (error) => {\n        setError(getErrorMessage(error));\n      },\n      defaultOptions\n    );\n\n    setWatchId(id);\n    setIsTracking(true);\n    return id;\n  }, [isTracking, watchId]);\n\n  const stopTracking = useCallback(() => {\n    if (watchId) {\n      navigator.geolocation.clearWatch(watchId);\n      setWatchId(null);\n      setIsTracking(false);\n    }\n  }, [watchId]);\n\n  const getErrorMessage = (error) => {\n    switch (error.code) {\n      case error.PERMISSION_DENIED:\n        return 'Location access denied. Please enable location services.';\n      case error.POSITION_UNAVAILABLE:\n        return 'Location information is unavailable.';\n      case error.TIMEOUT:\n        return 'Location request timed out.';\n      default:\n        return 'An unknown error occurred while getting location.';\n    }\n  };\n\n  useEffect(() => {\n    // Clean up on unmount\n    return () => {\n      if (watchId) {\n        navigator.geolocation.clearWatch(watchId);\n      }\n    };\n  }, [watchId]);\n\n  return {\n    location,\n    error,\n    isTracking,\n    getCurrentPosition,\n    startTracking,\n    stopTracking,\n    hasPermission: !!location || !error,\n    isSupported: !!navigator.geolocation\n  };\n};\n\nexport default useGeolocation;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}